ğŸ“Œ REPLIT PROMPT â€” Implement Full Premium System + Lesson Locking (Duolingo-style), Premium-Only Paths, 75% Score Rule, Global Events Paywall, Premium Page, Profile Popup Fix, and Supabase-Ready Structure

Please fully rebuild and unify the entire premium and lesson-locking system across the app. 
Follow this EXACT specification, do not reuse old scattered logic, and ensure everything matches the Islam Quest theme, layout, and animations.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1ï¸âƒ£ CENTRALISE ALL LESSON LOCKING
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Create ONE unified source of truth inside progressStore:

getLessonLockState(pathId, lessonIndex) â†’ "unlocked" | "progressLocked" | "premiumLocked"
applyLockingRules()
isPremiumLocked(pathId, lessonIndex)
canAccessLesson(pathId, lessonIndex)

Remove all scattered or conflicting logic from:
â€¢ Pathway.jsx
â€¢ Lesson.jsx
â€¢ Quiz completion
â€¢ Old debug code
â€¢ Any other components

All lesson UI must call this unified logic.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2ï¸âƒ£ FREE LESSON LIMITS (FINAL AND MANDATORY)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Apply the following EXACT free lesson limits:

Paths 11â€“14 â†’ PREMIUM ONLY (0 free lessons)
Path 5 â†’ 2 free
Path 6 â†’ 2 free
Path 7 â†’ 2 free
ALL OTHER PATHS â†’ 3 free

Replace the entire FREE_LESSON_LIMITS object with:

{
  1: 3, 2: 3, 3: 3, 4: 3,
  5: 2, 6: 2, 7: 2,
  8: 3, 9: 3, 10: 3,
  11: 0, 12: 0, 13: 0, 14: 0
}

Make sure lesson-locking checks premium limits FIRST.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
3ï¸âƒ£ PREMIUM-ONLY PATHS UI (VERY IMPORTANT)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Paths 11â€“14 (The Grave, Day of Judgement, Hellfire, Paradise) must:

â€¢ Show a grey tinted overlay
â€¢ Show a lock icon
â€¢ Show â€œPremium Onlyâ€
â€¢ Not allow even Lesson 1
â€¢ Not allow path entry

Tapping any of these paths should IMMEDIATELY open the Premium Page.

No popups first.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
4ï¸âƒ£ MINIMUM SCORE RULE (REPLACE OLD LOGIC)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
A lesson unlocks the next one ONLY IF:

correctAnswers / totalQuestions >= 0.75

Remove any hardcoded â€œ3 out of 4â€ logic. 
Use the 75% rule for ALL quizzes regardless of question count.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
5ï¸âƒ£ GLOBAL EVENTS MUST BE PREMIUM ONLY
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
If the user is NOT premium:
â€¢ Tapping Global Events must open the Premium Page.

If premium:
â€¢ Allow access normally.

Grey-tint the Global Events card if the user is not premium.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
6ï¸âƒ£ BUILD THE FULL PREMIUM PAGE (/premium)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Build a Duolingo-style full premium page using Islam Quest theme:

â€¢ Fullscreen page
â€¢ Mascot at top
â€¢ Title: â€œUnlock All Lessonsâ€
â€¢ Subtitle: â€œGet lifetime access to all 14 learning pathsâ€
â€¢ Benefits list:
   - Unlock all lessons
   - Lifetime access
   - No ads ever
   - Works across devices
   - Unlock Global Events
   - Unlock 4 exclusive premium paths
â€¢ Big CTA button â†’ â€œUnlock All â€” Â£4.99â€
â€¢ Secondary CTA â†’ â€œFamily Access â€” Â£18 (6 users)â€
â€¢ Back button (X or arrow) at top-left
â€¢ Restore Purchase link at bottom
â€¢ Bright yellow glow around the container (existing style)
â€¢ Fully mobile responsive
â€¢ Consistent with existing challenge popup theme

Premium page must update Zustand when purchase is simulated.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
7ï¸âƒ£ MAKE PREMIUM SYSTEM SUPABASE-READY
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
In userStore, add:

premium: false,
premiumType: null,
premiumActivatedAt: null,

And placeholder async functions:

async purchasePremium()
async restorePurchase()

These should:
â€¢ Update local Zustand state
â€¢ Be ready for Supabase integration later
DO NOT connect Stripe or IAP now.
Just build the architecture to accept them later.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
8ï¸âƒ£ PROFILE PREMIUM POPUP â€” FIX & REBUILD
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
The Profile page has a premium popup. 
Rebuild it with:

â€¢ Same card UI as before
â€¢ REMOVE â€œNot Nowâ€
â€¢ ADD a working X close button in top-right
â€¢ Keep â€œRestore Purchaseâ€ (Apple requires this)
â€¢ Use the updated benefits list
â€¢ CTA â€œUnlock All â€” Â£4.99â€
â€¢ Smooth fade & scale animation
â€¢ Theme-matched

Popup CTA should open the full Premium Page.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
9ï¸âƒ£ HOOK UP ALL PREMIUM LOCK POINTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Ensure the following all redirect to Premium Page when locked:

â€¢ Premium-only lessons
â€¢ Premium-only paths
â€¢ Premium-only global events
â€¢ Any feature behind paywall

Remove ANY old modal/popups forcing the user to tap â€œNot Nowâ€.

Buttons must always work and redirect cleanly.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”Ÿ REMOVE ALL OLD LOGIC
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Remove:
â€¢ old premiumConfig logic
â€¢ duplicate locking functions
â€¢ outdated getLockReason branches
â€¢ debug/unlock-all shortcuts
â€¢ unused modals
â€¢ old free lesson limit values
â€¢ any bypass logic

Ensure the system is CLEAN, unified, and consistent.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1ï¸âƒ£1ï¸âƒ£ FINAL EXPECTED OUTPUT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Replit must generate:
â€¢ Updated progressStore.js (full replacement)
â€¢ Updated premiumConfig.js (full replacement)
â€¢ Updated Pathway.jsx to use new lock states
â€¢ Updated Lesson components to obey new rules
â€¢ Updated Premium page (/premium) full rebuild
â€¢ Updated Profile premium popup UI logic
â€¢ Updated navigation helpers for premium redirect
â€¢ Updated Global Events entry logic
â€¢ Grey-tinted UI states for locked paths/global events
â€¢ Zustand premium flags + placeholder async purchase functions
â€¢ All logic Supabase-ready, not connected yet
â€¢ ZERO breaking of quiz, home, revise, challenge, or friends systems

Everything must match the Islam Quest theme, spacing, typography, rounded styles, glow effects, and animations.
Take your time. Do not rush. Verify everything before outputting code.

ğŸ“Œ REPLIT PROMPT â€” Restore & Upgrade My Friends Leaderboard, Challenges Integration, and Friend Actions  
(Do NOT touch Global Leaderboard)

Please fully restore and upgrade the Friends Leaderboard inside my Friends page.
This must recreate my old system EXACTLY as it was visually, including:

â€¢ Tabs: â€œFriendsâ€ and â€œGlobalâ€
â€¢ Leaderboard card layout
â€¢ XP display
â€¢ Streak display
â€¢ Avatar size and rounded corners
â€¢ Original spacing, colours, fonts, shadows
â€¢ My existing Islam Quest theme + Framer Motion animations

IMPORTANT:
âŒ DO NOT modify or replace the Global Leaderboard logic.
âœ” Only fix/restore the FRIENDS leaderboard tab.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”¹ 1. Use NEW Friends System + NEW Profiles
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

The old leaderboard used:
- friendsStore.friends
- friendsStore.simulatedFriends

These no longer exist.

Now rebuild Friends Leaderboard using:
- ONE friendships array (status = "accepted")
- A unified user profiles source:
  {
    id,
    username,
    nickname,
    avatar,
    xp,
    streak,
    lastActive
  }

Rules:
â€¢ Identify accepted friends via friendships array.
â€¢ Convert friendship entries to real user objects via profiles.
â€¢ Sort: highest XP â†’ highest streak â†’ nickname fallback.
â€¢ Remove self from list.
â€¢ No duplicates.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”¹ 2. RESTORE OLD ACTION BUTTONS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

For EACH friend row in the Friends Leaderboard:

LEFT SIDE:
â€¢ Avatar
â€¢ Nickname
â€¢ @username
â€¢ XP + streak (exact styling as before)

RIGHT SIDE BUTTONS (REQUIRED):

(1) Challenge Icon â†’ takes user to Challenge page  
    - Same icon  
    - Same animation  
    - Same navigation logic  
    - Uses the friendâ€™s ID  
    - Must re-establish the link (old logic broke when friends changed)

(2) Quick Message Icon  
    - NOT personal chat  
    - Opens a popup with pre-made quick messages  
    - Restore EXACT behaviour from your old code  
    - Same modal animation + theme

Keep the exact positions & UI of these buttons.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”¹ 3. Fix the Challenges Tab (Broken Now)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

The Challenges tab currently doesnâ€™t work because its logic referenced:
- Old friend list arrays
- Old simulated friends
- Old IDs

Rebuild the internal challenge-friend selection using the NEW friends:
â€¢ Use friendships.status === "accepted"
â€¢ Use profile lookup for name/avatar
â€¢ Ensure user can choose a friend to challenge
â€¢ Ensure navigation from leaderboard â†’ challenge works

DO NOT rewrite challenge game logic â€” only fix friend selection.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”¹ 4. DO NOT MODIFY GLOBAL LEADERBOARD
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Global leaderboard must remain EXACTLY as is.

Rules:
âœ” Do NOT alter global source  
âœ” Do NOT touch its logic  
âœ” Do NOT remove or rename components  
âœ” Only ensure it continues to render after new friends logic is added

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”¹ 5. UI / UX REQUIREMENTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Maintain all of these exactly:

â€¢ Rounded cards  
â€¢ XP/streak tag style  
â€¢ Avatar ring glow  
â€¢ Rank numbering  
â€¢ Horizontal spacing  
â€¢ Corner radii  
â€¢ Shadows  
â€¢ Colours  
â€¢ Animations from Framer Motion  
â€¢ Icon sizes  
â€¢ Bottom sheet modals (for quick messages)  
â€¢ Any haptic style button animations  
â€¢ Theme-consistent loading/skeletons  

Nothing visual should change â€” only the backend logic.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”¹ 6. Supabase-Ready Structure
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Rebuild logic so that later I can plug in:

- Supabase profiles table
- Supabase friendships table
- Supabase real-time updates

That means:

â€¢ No derived data stored permanently  
â€¢ No fake XP or fake users  
â€¢ Profiles and friendships must be used as the single source of truth  
â€¢ No reliance on old AI friends  
â€¢ No debug/beta leftovers  

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”¹ 7. Output
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Produce:

1. Updated Friends page code for:
   â€¢ Friends tab
   â€¢ Leaderboard tab
   â€¢ Challenge button linking
   â€¢ Quick message popup linking

2. Updated helpers:
   â€¢ getFriendsLeaderboard()
   â€¢ merge friendships + profiles
   â€¢ challengeFriend() routing helper

3. Updated imports & Zustand selectors

4. Any missing support components (e.g., quick message modal), restored to their original UI

Everything must be delivered as clean FULL replacement files (no inline snippets),
following my established file structure and coding standards.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
END OF PROMPT

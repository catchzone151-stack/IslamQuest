Please implement app-wide monetisation for Islam Quest with the following rules.
Do not touch any learning content, quizzes, or non-related systems.
Work ONLY on UI, logic, and Supabase-ready structure for monetisation + lesson locking.


---

ğŸŸ£ 1. App Behaviour: Free vs Paid

Free Users

Each learning path has X number of free lessons:

Names of Allah: 5

Foundations of Islam: 3

Stories of the Prophets: 5

Seerah: 7

Wives of the Prophet: 2

Ten Promised Jannah: 2

Four Greatest Women: 2

Stories of Companions: 4

Angels: 3

End Times: 4

The Grave: 3

Day of Judgment: 4

Paradise: 3

Hellfire: 3


All other lessons beyond these numbers are locked.

Path itself is always visible, only lessons are locked.

Locked lesson node must show a lock icon overlay, lesson number visible underneath.

Locked lessons cannot start, quiz button disabled.


Paid Users (Individual Â£4.99)

Unlocks all lessons in all 14 learning paths permanently.

Removes all locked states app-wide.

Unlock applies across devices.


Family Plan (Â£18)

Owner can create a family plan that supports 6 user profiles total:

Owner + 5 extra seats


Each user has:

Their own XP, coins, streak, avatar, nickname, titles, friends, challenges, rewards.


All users in the family plan get full unlocks permanently.



---

ğŸŸ¢ 2. Unlock Screens / Paywall UX

When a user taps a locked lesson:

Show premium modal, styled to match app theme.

Zayd mascot appears in the modal.

Modal must include:

â€œUnlock all lessons foreverâ€

â€œÂ£4.99 â€” Individual Accessâ€

â€œÂ£18 â€” Family Access (6 users)â€

â€œNo ads. Lifetime access. One-time payment.â€

Two large gold buttons: Unlock Individual / Unlock Family

â€œAlready purchased?â€ â†’ Restore Purchase



Place this same premium modal:

Inside âš™ Profile settings

Inside any locked lesson

Inside home banner (if user is free tier)



---

ğŸ”µ 3. Lock Logic (Local now, Supabase ready)

Implement now in localStorage:

premiumStatus = "free" | "individual" | "family"
familyPlanId (null if none)

When user purchases:

Set premiumStatus accordingly.

Unlock all lessons instantly.


Make code structured so switching to Supabase later is easy:

All unlock checks must run through one central function: isLessonUnlocked(pathId, lessonNumber)

Build this so later we can replace localStorage with Supabase rows without rewriting UI.



---

ğŸŸ  4. RevenueCat-Ready (No integration yet, just structure)

Build the front-end assuming:

RevenueCat will supply:

purchase status

restore purchases

family plan membership

active entitlements



Add placeholder functions:

purchaseIndividual()
purchaseFamily()
restorePurchases()

Do NOT implement actual payments yetâ€”just frontend triggers.


---

ğŸŸ¤ 5. Lesson Nodes UI Changes

For every learning path:

Free lessons = normal nodes.

Locked lessons:

Grey overlay

Gold lock icon

Number visible

â€œPremiumâ€ label underneath lesson title


Attempting to tap: â†’ Opens premium modal


Ensure:

ALL locked states reflect in:

Lesson page

Quiz button

Next lesson button

Home XP progress

Profile stats




---

ğŸŸ£ 6. Family Plan UI

Add under Profile â†’ Premium Access:

â€œYour Plan: Free / Individual / Familyâ€

If Family:

Show â€œFamily Members (X/6)â€

Show list of nicknames + avatars

Placeholder buttons:

Invite Member

Remove Member


Do NOT implement backend yet â€” placeholders only.




---

ğŸŸ¢ 7. Global Requirements

Keep entire UI consistent with app theme.

Premium modals, locked nodes, buttons must match current style (navy, gold, gradients).

Do not break streak logic, XP, coins, friends, challenge, global events, or revision systems.

Do not rewrite any existing functionality.

Only modify monetisation and lock behaviour.



---

ğŸŸ© 8. Quick Summary for Replit (internal use)

Add lesson locking.
Add premium modal.
Add purchase placeholders.
Add family plan placeholders.
Add permanent unlock logic.
Add localStorage state.
Make code Supabase-ready.
Protect all learning paths & UI.
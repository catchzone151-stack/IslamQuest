Replit Prompt â€” Global Events System + XP/Coin Integration (Islam Quest)

Implement a Global Events System under the Challenge tab that matches the existing Islam Quest UI (navyâ€“gold theme, glow, Zayd mascot, responsive).
Everything here is local for now, but must be structured so itâ€™s easy to migrate to Supabase later.


---

ğŸ•° Weekly Schedule (UK Time)

Events run Friday â†’ Thursday every week.

All times are GMT (UK time).

Events close and final results unlock Thursday at 22:00 (10 PM) GMT.

This timing applies everywhere in this feature.



---

ğŸ•Œ Access & Layout

In the Challenge tab, add a â€œGlobal Eventsâ€ entry point.

Tapping it opens a dedicated screen with 4 event cards in a 2x2 grid layout (not horizontal scroll).

Each card:

Unique theme & background (not plain navy).

Subtle glow.

Shows: event name, time remaining, entry fee, and small leaderboard (trophy) icon.




---

ğŸ® Event Types (4 Weekly Tournaments)

Create 4 distinct weekly events:

1. Pillar Clash

Source: Foundations of Islam path.

Theme: emerald + gold gradient.



2. Names of Allah Mastery

Source: Names of Allah path.

Theme: deep blue + gold.



3. Faith Test

Source: belief / Akhirah-related paths (Grave, Day of Judgement, Paradise, Hellfire, Angels).

Theme: purple + gold aura.



4. Seerah Challenge

Source: Seerah / Life of the Prophet ï·º path.

Theme: rich red + silver-gold.




Question Rules:

Each event = 10 hard MCQs.

Questions must only come from that eventâ€™s assigned paths.

Difficulty higher than normal lesson quizzes.

Randomise:

question order,

option positions,

wording (without changing meaning).


Avoid showing the exact same question twice in a row for the same user.



---

ğŸ’° Entry & Participation

Entry fee: 25 coins per event (no free entry).

If user has <25 coins â†’ show Zayd modal:

> â€œTrain a bit more and earn coins to enter next time ğŸŒ™â€



Users may join all 4 events in the week if they can afford it.

On entry:

Show a small info card:

Rules summary

Rewards summary

â€œFirst attempt counts for rankingâ€


Start button text: â€œBismillahâ€ (not â€œGoâ€).




---

â± Gameplay Flow

1. User taps event card.


2. Event modal opens with:

Event title

Short description

Entry fee

Remaining time

Rewards overview

Buttons: â€œBismillahâ€ / â€œBackâ€.



3. On â€œBismillahâ€:

3-second countdown overlay with Zayd animation (contained in modal).



4. Show the 10-question challenge:

60-second total timer.

Use existing visual language (cards, gold borders).



5. After answering all:

Show Provisional Results Modal.





---

ğŸŸ£ Provisional Results Modal (Right After Playing)

Design: modal only (dark navyâ†’black gradient, gold frame, Zayd inside).

Shows:

Provisional rank (local estimate for now, e.g. â€œCurrent Position: #78â€).

XP gained from performance.

Coins spent already (entry consumed).


Text:

> â€œYour official ranking and bonus rewards will be revealed Thursday 10 PM GMT.â€



Button: â€œBack to Eventsâ€.


(For now, provisional rank can be local/mock; real global logic comes with Supabase later.)


---

ğŸ† Final Results Reveal (Thursday 22:00 GMT)

When user opens Global Events after results unlock:

The event card for finished event pulses gold.

Tapping it opens Final Results Modal.


Final Results Modal:

Full-screen modal (still contained), dark navyâ†’black gradient, gold glow edges.

Zayd animation inside modal (clap/confetti), not fullscreen.

Reveal sequence:

1. Title: â€œğŸ† Global Event Results ğŸ†â€.


2. Top 10 players list:

Each row: profile avatar (from onboarding), nickname, XP/event score.

#1: strong gold glow
#2â€“3: silver/bronze glow
#4â€“10: subtle gold/white.



3. Userâ€™s own rank appears below Top 10:

Highlighted with emerald outline and soft glow.



4. XP & coins animate up to show rewards applied.


5. Show level progress bar update.




Buttons:

â€œğŸ“Š View Full Leaderboardâ€ â†’ opens Scrollable leaderboard (top 100; Friends/Global toggle; highlight current user).

â€œğŸ¡ Back to Challengesâ€.


Zayd Messages by Rank:

1st: â€œSubhanAllah! You conquered this week!â€

2â€“10: â€œMashaAllah! Youâ€™re among the top achievers!â€

11â€“100: â€œGreat effort, keep climbing!â€

Others: â€œYou played with heart â€” next week is yours!â€



---

âš™ï¸ XP & Coin Integration

Integrate with existing useProgressStore:

Deduct 25 coins immediately on event entry.

During play, track performance locally.

On final results (Thursday 22:00 GMT simulated locally for now):

Apply rewards to the same XP & coins fields used across the app.



Reward Tiers (Balanced):

ğŸ¥‡ 1st: +1000 XP, +300 coins

ğŸ¥ˆ 2â€“3: +750 XP, +200 coins

ğŸ¥‰ 4â€“10: +500 XP, +100 coins

âœ… All participants who completed run: +100 XP, +10 coins


Rules:

Rewards apply once per user per event per week.

Trigger Diamond Level System updates and normal level-up modal if thresholds crossed.

Ensure this all uses shared XP/coin store (no separate counters).



---

ğŸ§© Technical & Style Notes

Keep everything on-theme:

gold highlights,

rounded cards,

soft glows,

Zayd as mascot in modals/headers only.


Self-contained, no breaking existing routes.

Prepare structure so later:

event results,

leaderboards,

and ranks can be powered by Supabase without rewriting UI.

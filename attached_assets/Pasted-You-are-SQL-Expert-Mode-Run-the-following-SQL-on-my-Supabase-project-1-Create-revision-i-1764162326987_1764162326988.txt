You are SQL Expert Mode.  
Run the following SQL on my Supabase project:

-- 1. Create revision_items table
CREATE TABLE IF NOT EXISTS revision_items (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id uuid NOT NULL REFERENCES profiles(id) ON DELETE CASCADE,

  lesson_id text NOT NULL,
  card_id text NOT NULL,

  strength float8 NOT NULL DEFAULT 0,
  times_correct int NOT NULL DEFAULT 0,
  times_wrong int NOT NULL DEFAULT 0,

  last_reviewed_at timestamptz,
  next_review_at timestamptz,

  is_deleted boolean NOT NULL DEFAULT false,
  extra_data jsonb,

  created_at timestamptz NOT NULL DEFAULT now(),
  updated_at timestamptz NOT NULL DEFAULT now()
);

-- 2. Safety constraint: Max 20k rows per user
ALTER TABLE revision_items
ADD CONSTRAINT revision_items_limit CHECK (
  (SELECT COUNT(*) FROM revision_items ri WHERE ri.user_id = user_id) <= 20000
);

-- 3. Indexes for fast sync
CREATE INDEX IF NOT EXISTS idx_revision_user ON revision_items(user_id);
CREATE INDEX IF NOT EXISTS idx_revision_lookup ON revision_items(user_id, lesson_id, card_id);

-- 4. Auto-update timestamp trigger
CREATE OR REPLACE FUNCTION update_revision_updated_at()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = now();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

DROP TRIGGER IF EXISTS trg_revision_updated_at ON revision_items;

CREATE TRIGGER trg_revision_updated_at
BEFORE UPDATE ON revision_items
FOR EACH ROW
EXECUTE FUNCTION update_revision_updated_at();

-- 5. Enable Row Level Security
ALTER TABLE revision_items ENABLE ROW LEVEL SECURITY;

-- 6. Policies
CREATE POLICY "Users can SELECT their own revision items"
  ON revision_items FOR SELECT
  USING (user_id = auth.uid());

CREATE POLICY "Users can INSERT their own revision items"
  ON revision_items FOR INSERT
  WITH CHECK (user_id = auth.uid());

CREATE POLICY "Users can UPDATE their own revision items"
  ON revision_items FOR UPDATE
  USING (user_id = auth.uid());

CREATE POLICY "Users cannot DELETE revision items"
  ON revision_items FOR DELETE
  USING (false);


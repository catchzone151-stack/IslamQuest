You are Senior Dev Mode.
Audit the entire app for functional polish issues.
Do NOT change features ‚Äî fix only stability, fallback, missing guards, error handling, and hydration flow.
Make code changes ONLY if required for stability.

üîç TASK LIST ‚Äî Fix ALL of these if needed:
1. Error resilience

Add safe guards everywhere:

If Supabase fetch fails ‚Üí return default fallback (never null that breaks UI)

If push/insert/upsert fails ‚Üí silently queue local changes (store flag: needsSync = true)

If user has no internet ‚Üí app should still load from device stores

If daily quest missing questions ‚Üí auto regenerate

If revision items missing ‚Üí initialize empty array

If profile missing fields ‚Üí apply defaults

2. Prevent white screens

Check every store:

Must hydrate before used

Must never return undefined

UI must never render before hydration (wrap screens with: if (!isHydrated) return <Loading/>)

App.jsx must guard routing (no onboarding ‚Üí no access to main app)

3. Crash-proof all sync modules

For each file:

src/sync/engine.js

src/sync/profileSync.js

src/sync/dailyQuestSync.js

src/sync/revisionSync.js

Add:

try/catch around all Supabase calls

console.warn instead of console.error for non-critical failures

retry logic for pushes (1 retry max)

If pull returns null ‚Üí fallback to existing local store

4. Supervise user flow

Check all navigation guards:

User must finish onboarding before accessing:

Revise

Friends

Challenges

Leaderboard

User must finish lessons before accessing Revise

If profile incomplete ‚Üí force onboarding

Fix any missing guards in:

App.jsx

router logic

header buttons

navigation actions

5. Daily quest safety

Daily quest must always have:

date

questions (array)

completed flag

rewardGiven flag

regenerate if cloud returns invalid JSON or empty

prevent duplicate rows (user_id + date unique)

6. Revision safety

reviseStore must never break if weakPool empty

merging must always return arrays

revision items missing fields get defaults

never assume Supabase returns all fields

7. Profile safety

If streak/shields/xp missing ‚Üí default to 0

If avatar missing ‚Üí DEFAULT_AVATAR

If handle/username missing ‚Üí prevent app crash

‚ö†Ô∏è IMPORTANT RULES

Do NOT redesign UI

Do NOT remove any features

Respect existing architecture

Only fix stability + fallback logic

Always generate full file replacements (my rule)

Keep messaging short

After changes, print:
Functional polish complete.
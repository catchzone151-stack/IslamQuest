You must now perform a targeted integrity scan + repair of several backend
features in my IslamQuest project. These are tables that exist in Supabase
but may not be wired or may have missing logging.

Do NOT restructure the project.  
Do NOT rename files.  
Only repair what is missing or broken.

===============================
FEATURES TO VERIFY AND FIX
===============================

1. family_members table
   - Find all code that should manage adding or removing family members.
   - Ensure correct Supabase calls:
        insert into family_members (family_id, user_id)
        delete from family_members
   - Add missing imports for supabase if required.
   - Confirm there is a function in familyStore or profileStore that writes to it.
   - If no logic exists, generate minimal add/remove family functions.

2. friends table
   - Scan all friend-related features under:
        src/stores/friendsStore.js
        src/pages/Friends.jsx
   - Confirm:
        send friend request
        accept friend request
        reject friend request
        remove friend
   - Ensure each operation contains:
        supabase.from("friends").insert(...)
        supabase.from("friends").delete(...)
   - Repair missing imports or wrong table names.

3. global_events and event progress
   - Look at:
        src/screens/EventQuiz.jsx
        src/pages/GlobalEvents.jsx
   - Verify:
        event participation logging
        XP logging (logXpEvent with source "event_quiz")
        supabase inserts into event_entries or global_events_progress
   - If event_entries table is used, ensure writes are correct.
   - Add missing imports for logXpEvent and supabase.

4. purchases table
   - Find all Premium / Purchase / Coins purchase logic:
        src/components/premium
        src/stores/userStore.js
        src/stores/premiumStore.js
   - Confirm correct Supabase inserts:
        supabase.from("purchases").insert({
            user_id,
            product_id,
            amount,
            timestamp
        })
   - Ensure no missing imports.

5. streak_logs table
   - Look inside:
        src/stores/userStore.js
   - Verify that EVERY possible streak state change calls:
        logStreakEvent(userId, "<event>", <value>)
   - Confirm that logStreakEvent correctly inserts into streak_logs.
   - Repair any missing imports or missing await calls.

6. challenges, challenge_requests, challenge_results
   - Look inside src/stores/challengeStore.js and all challenge files.
   - For sending challenges:
        supabase.from("challenge_requests").insert(...)
   - For completing challenges:
        supabase.from("challenge_results").insert(...)
   - Ensure:
        logChallengeRequest()
        logChallengeResult()
   - Verify all imports exist and functions are correctly linked.

================================
FINAL VALIDATION ACTION
================================
After scanning all of these:
- Insert any missing Supabase writes
- Repair incorrect table names
- Fix import paths
- Ensure each feature is fully wired

At the end:
Output a summary in this format:

FAMILY MEMBERS: ok/fixed  
FRIENDS: ok/fixed  
GLOBAL EVENTS: ok/fixed  
PURCHASES: ok/fixed  
STREAK LOGS: ok/fixed  
CHALLENGES: ok/fixed  

And print:  
"All requested backend features have been verified and repaired."
